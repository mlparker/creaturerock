import _styled from "@emotion/styled/base";
import React from 'react';
import PropTypes from 'prop-types';
import ImmutablePropTypes from 'react-immutable-proptypes';
import { connect } from 'react-redux';
import { translate } from 'react-polyglot';
import partial from 'lodash/partial';
import { Cursor } from 'decap-cms-lib-util';
import { colors } from 'decap-cms-ui-default';
import { loadEntries as actionLoadEntries, traverseCollectionCursor as actionTraverseCollectionCursor } from '../../../actions/entries';
import { selectEntries, selectEntriesLoaded, selectIsFetching, selectGroups } from '../../../reducers/entries';
import { selectCollectionEntriesCursor } from '../../../reducers/cursors';
import Entries from './Entries';
import { jsx as ___EmotionJSX } from "@emotion/react";
const GroupHeading = /*#__PURE__*/_styled("h2", {
  target: "eucqz2q1",
  label: "GroupHeading"
})("font-size:22px;font-weight:600;line-height:37px;padding-inline-start:20px;color:", colors.textLead, ";" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0NvbGxlY3Rpb24vRW50cmllcy9FbnRyaWVzQ29sbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF1QjhCIiwiZmlsZSI6Ii4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0NvbGxlY3Rpb24vRW50cmllcy9FbnRyaWVzQ29sbGVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IEltbXV0YWJsZVByb3BUeXBlcyBmcm9tICdyZWFjdC1pbW11dGFibGUtcHJvcHR5cGVzJztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5pbXBvcnQgeyB0cmFuc2xhdGUgfSBmcm9tICdyZWFjdC1wb2x5Z2xvdCc7XG5pbXBvcnQgcGFydGlhbCBmcm9tICdsb2Rhc2gvcGFydGlhbCc7XG5pbXBvcnQgeyBDdXJzb3IgfSBmcm9tICdkZWNhcC1jbXMtbGliLXV0aWwnO1xuaW1wb3J0IHsgY29sb3JzIH0gZnJvbSAnZGVjYXAtY21zLXVpLWRlZmF1bHQnO1xuXG5pbXBvcnQge1xuICBsb2FkRW50cmllcyBhcyBhY3Rpb25Mb2FkRW50cmllcyxcbiAgdHJhdmVyc2VDb2xsZWN0aW9uQ3Vyc29yIGFzIGFjdGlvblRyYXZlcnNlQ29sbGVjdGlvbkN1cnNvcixcbn0gZnJvbSAnLi4vLi4vLi4vYWN0aW9ucy9lbnRyaWVzJztcbmltcG9ydCB7XG4gIHNlbGVjdEVudHJpZXMsXG4gIHNlbGVjdEVudHJpZXNMb2FkZWQsXG4gIHNlbGVjdElzRmV0Y2hpbmcsXG4gIHNlbGVjdEdyb3Vwcyxcbn0gZnJvbSAnLi4vLi4vLi4vcmVkdWNlcnMvZW50cmllcyc7XG5pbXBvcnQgeyBzZWxlY3RDb2xsZWN0aW9uRW50cmllc0N1cnNvciB9IGZyb20gJy4uLy4uLy4uL3JlZHVjZXJzL2N1cnNvcnMnO1xuaW1wb3J0IEVudHJpZXMgZnJvbSAnLi9FbnRyaWVzJztcblxuY29uc3QgR3JvdXBIZWFkaW5nID0gc3R5bGVkLmgyYFxuICBmb250LXNpemU6IDIycHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGxpbmUtaGVpZ2h0OiAzN3B4O1xuICBwYWRkaW5nLWlubGluZS1zdGFydDogMjBweDtcbiAgY29sb3I6ICR7Y29sb3JzLnRleHRMZWFkfTtcbmA7XG5cbmNvbnN0IEdyb3VwQ29udGFpbmVyID0gc3R5bGVkLmRpdmBgO1xuXG5mdW5jdGlvbiBnZXRHcm91cEVudHJpZXMoZW50cmllcywgcGF0aHMpIHtcbiAgcmV0dXJuIGVudHJpZXMuZmlsdGVyKGVudHJ5ID0+IHBhdGhzLmhhcyhlbnRyeS5nZXQoJ3BhdGgnKSkpO1xufVxuXG5mdW5jdGlvbiBnZXRHcm91cFRpdGxlKGdyb3VwLCB0KSB7XG4gIGNvbnN0IHsgbGFiZWwsIHZhbHVlIH0gPSBncm91cDtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdCgnY29sbGVjdGlvbi5ncm91cHMub3RoZXInKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gdmFsdWUgPyBsYWJlbCA6IHQoJ2NvbGxlY3Rpb24uZ3JvdXBzLm5lZ2F0ZUxhYmVsJywgeyBsYWJlbCB9KTtcbiAgfVxuICByZXR1cm4gYCR7bGFiZWx9ICR7dmFsdWV9YC50cmltKCk7XG59XG5cbmZ1bmN0aW9uIHdpdGhHcm91cHMoZ3JvdXBzLCBlbnRyaWVzLCBFbnRyaWVzVG9SZW5kZXIsIHQpIHtcbiAgcmV0dXJuIGdyb3Vwcy5tYXAoZ3JvdXAgPT4ge1xuICAgIGNvbnN0IHRpdGxlID0gZ2V0R3JvdXBUaXRsZShncm91cCwgdCk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxHcm91cENvbnRhaW5lciBrZXk9e2dyb3VwLmlkfSBpZD17Z3JvdXAuaWR9PlxuICAgICAgICA8R3JvdXBIZWFkaW5nPnt0aXRsZX08L0dyb3VwSGVhZGluZz5cbiAgICAgICAgPEVudHJpZXNUb1JlbmRlciBlbnRyaWVzPXtnZXRHcm91cEVudHJpZXMoZW50cmllcywgZ3JvdXAucGF0aHMpfSAvPlxuICAgICAgPC9Hcm91cENvbnRhaW5lcj5cbiAgICApO1xuICB9KTtcbn1cblxuZXhwb3J0IGNsYXNzIEVudHJpZXNDb2xsZWN0aW9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBjb2xsZWN0aW9uOiBJbW11dGFibGVQcm9wVHlwZXMubWFwLmlzUmVxdWlyZWQsXG4gICAgcGFnZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICBlbnRyaWVzOiBJbW11dGFibGVQcm9wVHlwZXMubGlzdCxcbiAgICBncm91cHM6IFByb3BUeXBlcy5hcnJheSxcbiAgICBpc0ZldGNoaW5nOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIHZpZXdTdHlsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjdXJzb3I6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBsb2FkRW50cmllczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICB0cmF2ZXJzZUNvbGxlY3Rpb25DdXJzb3I6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgZW50cmllc0xvYWRlZDogUHJvcFR5cGVzLmJvb2wsXG4gIH07XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy8gTWFudWFsbHkgdmFsaWRhdGUgUHJvcFR5cGVzIC0gUmVhY3QgMTkgYnJlYWtpbmcgY2hhbmdlXG4gICAgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKEVudHJpZXNDb2xsZWN0aW9uLnByb3BUeXBlcywgdGhpcy5wcm9wcywgJ3Byb3AnLCAnRW50cmllc0NvbGxlY3Rpb24nKTtcblxuICAgIGNvbnN0IHsgY29sbGVjdGlvbiwgZW50cmllc0xvYWRlZCwgbG9hZEVudHJpZXMgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKGNvbGxlY3Rpb24gJiYgIWVudHJpZXNMb2FkZWQpIHtcbiAgICAgIGxvYWRFbnRyaWVzKGNvbGxlY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb24sIGVudHJpZXNMb2FkZWQsIGxvYWRFbnRyaWVzIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChjb2xsZWN0aW9uICE9PSBwcmV2UHJvcHMuY29sbGVjdGlvbiAmJiAhZW50cmllc0xvYWRlZCkge1xuICAgICAgbG9hZEVudHJpZXMoY29sbGVjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ3Vyc29yQWN0aW9ucyA9IChjdXJzb3IsIGFjdGlvbikgPT4ge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbiwgdHJhdmVyc2VDb2xsZWN0aW9uQ3Vyc29yIH0gPSB0aGlzLnByb3BzO1xuICAgIHRyYXZlcnNlQ29sbGVjdGlvbkN1cnNvcihjb2xsZWN0aW9uLCBhY3Rpb24pO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb24sIGVudHJpZXMsIGdyb3VwcywgaXNGZXRjaGluZywgdmlld1N0eWxlLCBjdXJzb3IsIHBhZ2UsIHQgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCBFbnRyaWVzVG9SZW5kZXIgPSAoeyBlbnRyaWVzIH0pID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFbnRyaWVzXG4gICAgICAgICAgY29sbGVjdGlvbnM9e2NvbGxlY3Rpb259XG4gICAgICAgICAgZW50cmllcz17ZW50cmllc31cbiAgICAgICAgICBpc0ZldGNoaW5nPXtpc0ZldGNoaW5nfVxuICAgICAgICAgIGNvbGxlY3Rpb25OYW1lPXtjb2xsZWN0aW9uLmdldCgnbGFiZWwnKX1cbiAgICAgICAgICB2aWV3U3R5bGU9e3ZpZXdTdHlsZX1cbiAgICAgICAgICBjdXJzb3I9e2N1cnNvcn1cbiAgICAgICAgICBoYW5kbGVDdXJzb3JBY3Rpb25zPXtwYXJ0aWFsKHRoaXMuaGFuZGxlQ3Vyc29yQWN0aW9ucywgY3Vyc29yKX1cbiAgICAgICAgICBwYWdlPXtwYWdlfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgaWYgKGdyb3VwcyAmJiBncm91cHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHdpdGhHcm91cHMoZ3JvdXBzLCBlbnRyaWVzLCBFbnRyaWVzVG9SZW5kZXIsIHQpO1xuICAgIH1cblxuICAgIHJldHVybiA8RW50cmllc1RvUmVuZGVyIGVudHJpZXM9e2VudHJpZXN9IC8+O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJOZXN0ZWRFbnRyaWVzKHBhdGgsIGNvbGxlY3Rpb25Gb2xkZXIsIGVudHJpZXMsIHN1YmZvbGRlcnMpIHtcbiAgY29uc3QgZmlsdGVyZWQgPSBlbnRyaWVzLmZpbHRlcihlID0+IHtcbiAgICBsZXQgZW50cnlQYXRoID0gZS5nZXQoJ3BhdGgnKS5zbGljZShjb2xsZWN0aW9uRm9sZGVyLmxlbmd0aCArIDEpO1xuICAgIGlmICghZW50cnlQYXRoLnN0YXJ0c1dpdGgocGF0aCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBmb3Igc3ViZGlyZWN0b3JpZXMsIHRyaW0gb2ZmIHRoZSBwYXJlbnQgZm9sZGVyIGNvcnJlc3BvbmRpbmcgdG9cbiAgICAvLyB0aGlzIG5lc3RlZCBjb2xsZWN0aW9uIGVudHJ5XG4gICAgaWYgKHBhdGgpIHtcbiAgICAgIGVudHJ5UGF0aCA9IGVudHJ5UGF0aC5zbGljZShwYXRoLmxlbmd0aCArIDEpO1xuICAgIH1cblxuICAgIC8vIGlmIHN1YmZvbGRlcnMgbGVnYWN5IG1vZGUgaXMgZW5hYmxlZCwgc2hvdyBvbmx5IGltbWVkaWF0ZSBzdWJmb2xkZXJzXG4gICAgLy8gYWxzbyBzaG93IGluZGV4IGZpbGUgaW4gcm9vdCBmb2xkZXJcbiAgICBpZiAoc3ViZm9sZGVycykge1xuICAgICAgY29uc3QgZGVwdGggPSBlbnRyeVBhdGguc3BsaXQoJy8nKS5sZW5ndGg7XG4gICAgICByZXR1cm4gcGF0aCA/IGRlcHRoID09PSAyIDogZGVwdGggPD0gMjtcbiAgICB9XG5cbiAgICAvLyBvbmx5IHNob3cgaW1tZWRpYXRlIGNoaWxkcmVuXG4gICAgcmV0dXJuICFlbnRyeVBhdGguaW5jbHVkZXMoJy8nKTtcbiAgfSk7XG4gIHJldHVybiBmaWx0ZXJlZDtcbn1cblxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlLCBvd25Qcm9wcykge1xuICBjb25zdCB7IGNvbGxlY3Rpb24sIHZpZXdTdHlsZSwgZmlsdGVyVGVybSB9ID0gb3duUHJvcHM7XG4gIGNvbnN0IHBhZ2UgPSBzdGF0ZS5lbnRyaWVzLmdldEluKFsncGFnZXMnLCBjb2xsZWN0aW9uLmdldCgnbmFtZScpLCAncGFnZSddKTtcblxuICBsZXQgZW50cmllcyA9IHNlbGVjdEVudHJpZXMoc3RhdGUuZW50cmllcywgY29sbGVjdGlvbik7XG4gIGNvbnN0IGdyb3VwcyA9IHNlbGVjdEdyb3VwcyhzdGF0ZS5lbnRyaWVzLCBjb2xsZWN0aW9uKTtcblxuICBpZiAoY29sbGVjdGlvbi5oYXMoJ25lc3RlZCcpKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbkZvbGRlciA9IGNvbGxlY3Rpb24uZ2V0KCdmb2xkZXInKTtcbiAgICBlbnRyaWVzID0gZmlsdGVyTmVzdGVkRW50cmllcyhcbiAgICAgIGZpbHRlclRlcm0gfHwgJycsXG4gICAgICBjb2xsZWN0aW9uRm9sZGVyLFxuICAgICAgZW50cmllcyxcbiAgICAgIGNvbGxlY3Rpb24uZ2V0KCduZXN0ZWQnKS5nZXQoJ3N1YmZvbGRlcnMnKSAhPT0gZmFsc2UsXG4gICAgKTtcbiAgfVxuICBjb25zdCBlbnRyaWVzTG9hZGVkID0gc2VsZWN0RW50cmllc0xvYWRlZChzdGF0ZS5lbnRyaWVzLCBjb2xsZWN0aW9uLmdldCgnbmFtZScpKTtcbiAgY29uc3QgaXNGZXRjaGluZyA9IHNlbGVjdElzRmV0Y2hpbmcoc3RhdGUuZW50cmllcywgY29sbGVjdGlvbi5nZXQoJ25hbWUnKSk7XG5cbiAgY29uc3QgcmF3Q3Vyc29yID0gc2VsZWN0Q29sbGVjdGlvbkVudHJpZXNDdXJzb3Ioc3RhdGUuY3Vyc29ycywgY29sbGVjdGlvbi5nZXQoJ25hbWUnKSk7XG4gIGNvbnN0IGN1cnNvciA9IEN1cnNvci5jcmVhdGUocmF3Q3Vyc29yKS5jbGVhckRhdGEoKTtcblxuICByZXR1cm4geyBjb2xsZWN0aW9uLCBwYWdlLCBlbnRyaWVzLCBncm91cHMsIGVudHJpZXNMb2FkZWQsIGlzRmV0Y2hpbmcsIHZpZXdTdHlsZSwgY3Vyc29yIH07XG59XG5cbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IHtcbiAgbG9hZEVudHJpZXM6IGFjdGlvbkxvYWRFbnRyaWVzLFxuICB0cmF2ZXJzZUNvbGxlY3Rpb25DdXJzb3I6IGFjdGlvblRyYXZlcnNlQ29sbGVjdGlvbkN1cnNvcixcbn07XG5cbmNvbnN0IENvbm5lY3RlZEVudHJpZXNDb2xsZWN0aW9uID0gY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoRW50cmllc0NvbGxlY3Rpb24pO1xuXG5leHBvcnQgZGVmYXVsdCB0cmFuc2xhdGUoKShDb25uZWN0ZWRFbnRyaWVzQ29sbGVjdGlvbik7XG4iXX0= */"));
const GroupContainer = /*#__PURE__*/_styled("div", {
  target: "eucqz2q0",
  label: "GroupContainer"
})(process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0NvbGxlY3Rpb24vRW50cmllcy9FbnRyaWVzQ29sbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErQmlDIiwiZmlsZSI6Ii4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0NvbGxlY3Rpb24vRW50cmllcy9FbnRyaWVzQ29sbGVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IEltbXV0YWJsZVByb3BUeXBlcyBmcm9tICdyZWFjdC1pbW11dGFibGUtcHJvcHR5cGVzJztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5pbXBvcnQgeyB0cmFuc2xhdGUgfSBmcm9tICdyZWFjdC1wb2x5Z2xvdCc7XG5pbXBvcnQgcGFydGlhbCBmcm9tICdsb2Rhc2gvcGFydGlhbCc7XG5pbXBvcnQgeyBDdXJzb3IgfSBmcm9tICdkZWNhcC1jbXMtbGliLXV0aWwnO1xuaW1wb3J0IHsgY29sb3JzIH0gZnJvbSAnZGVjYXAtY21zLXVpLWRlZmF1bHQnO1xuXG5pbXBvcnQge1xuICBsb2FkRW50cmllcyBhcyBhY3Rpb25Mb2FkRW50cmllcyxcbiAgdHJhdmVyc2VDb2xsZWN0aW9uQ3Vyc29yIGFzIGFjdGlvblRyYXZlcnNlQ29sbGVjdGlvbkN1cnNvcixcbn0gZnJvbSAnLi4vLi4vLi4vYWN0aW9ucy9lbnRyaWVzJztcbmltcG9ydCB7XG4gIHNlbGVjdEVudHJpZXMsXG4gIHNlbGVjdEVudHJpZXNMb2FkZWQsXG4gIHNlbGVjdElzRmV0Y2hpbmcsXG4gIHNlbGVjdEdyb3Vwcyxcbn0gZnJvbSAnLi4vLi4vLi4vcmVkdWNlcnMvZW50cmllcyc7XG5pbXBvcnQgeyBzZWxlY3RDb2xsZWN0aW9uRW50cmllc0N1cnNvciB9IGZyb20gJy4uLy4uLy4uL3JlZHVjZXJzL2N1cnNvcnMnO1xuaW1wb3J0IEVudHJpZXMgZnJvbSAnLi9FbnRyaWVzJztcblxuY29uc3QgR3JvdXBIZWFkaW5nID0gc3R5bGVkLmgyYFxuICBmb250LXNpemU6IDIycHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGxpbmUtaGVpZ2h0OiAzN3B4O1xuICBwYWRkaW5nLWlubGluZS1zdGFydDogMjBweDtcbiAgY29sb3I6ICR7Y29sb3JzLnRleHRMZWFkfTtcbmA7XG5cbmNvbnN0IEdyb3VwQ29udGFpbmVyID0gc3R5bGVkLmRpdmBgO1xuXG5mdW5jdGlvbiBnZXRHcm91cEVudHJpZXMoZW50cmllcywgcGF0aHMpIHtcbiAgcmV0dXJuIGVudHJpZXMuZmlsdGVyKGVudHJ5ID0+IHBhdGhzLmhhcyhlbnRyeS5nZXQoJ3BhdGgnKSkpO1xufVxuXG5mdW5jdGlvbiBnZXRHcm91cFRpdGxlKGdyb3VwLCB0KSB7XG4gIGNvbnN0IHsgbGFiZWwsIHZhbHVlIH0gPSBncm91cDtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdCgnY29sbGVjdGlvbi5ncm91cHMub3RoZXInKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gdmFsdWUgPyBsYWJlbCA6IHQoJ2NvbGxlY3Rpb24uZ3JvdXBzLm5lZ2F0ZUxhYmVsJywgeyBsYWJlbCB9KTtcbiAgfVxuICByZXR1cm4gYCR7bGFiZWx9ICR7dmFsdWV9YC50cmltKCk7XG59XG5cbmZ1bmN0aW9uIHdpdGhHcm91cHMoZ3JvdXBzLCBlbnRyaWVzLCBFbnRyaWVzVG9SZW5kZXIsIHQpIHtcbiAgcmV0dXJuIGdyb3Vwcy5tYXAoZ3JvdXAgPT4ge1xuICAgIGNvbnN0IHRpdGxlID0gZ2V0R3JvdXBUaXRsZShncm91cCwgdCk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxHcm91cENvbnRhaW5lciBrZXk9e2dyb3VwLmlkfSBpZD17Z3JvdXAuaWR9PlxuICAgICAgICA8R3JvdXBIZWFkaW5nPnt0aXRsZX08L0dyb3VwSGVhZGluZz5cbiAgICAgICAgPEVudHJpZXNUb1JlbmRlciBlbnRyaWVzPXtnZXRHcm91cEVudHJpZXMoZW50cmllcywgZ3JvdXAucGF0aHMpfSAvPlxuICAgICAgPC9Hcm91cENvbnRhaW5lcj5cbiAgICApO1xuICB9KTtcbn1cblxuZXhwb3J0IGNsYXNzIEVudHJpZXNDb2xsZWN0aW9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBjb2xsZWN0aW9uOiBJbW11dGFibGVQcm9wVHlwZXMubWFwLmlzUmVxdWlyZWQsXG4gICAgcGFnZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICBlbnRyaWVzOiBJbW11dGFibGVQcm9wVHlwZXMubGlzdCxcbiAgICBncm91cHM6IFByb3BUeXBlcy5hcnJheSxcbiAgICBpc0ZldGNoaW5nOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIHZpZXdTdHlsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjdXJzb3I6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBsb2FkRW50cmllczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICB0cmF2ZXJzZUNvbGxlY3Rpb25DdXJzb3I6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgZW50cmllc0xvYWRlZDogUHJvcFR5cGVzLmJvb2wsXG4gIH07XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy8gTWFudWFsbHkgdmFsaWRhdGUgUHJvcFR5cGVzIC0gUmVhY3QgMTkgYnJlYWtpbmcgY2hhbmdlXG4gICAgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKEVudHJpZXNDb2xsZWN0aW9uLnByb3BUeXBlcywgdGhpcy5wcm9wcywgJ3Byb3AnLCAnRW50cmllc0NvbGxlY3Rpb24nKTtcblxuICAgIGNvbnN0IHsgY29sbGVjdGlvbiwgZW50cmllc0xvYWRlZCwgbG9hZEVudHJpZXMgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKGNvbGxlY3Rpb24gJiYgIWVudHJpZXNMb2FkZWQpIHtcbiAgICAgIGxvYWRFbnRyaWVzKGNvbGxlY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb24sIGVudHJpZXNMb2FkZWQsIGxvYWRFbnRyaWVzIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChjb2xsZWN0aW9uICE9PSBwcmV2UHJvcHMuY29sbGVjdGlvbiAmJiAhZW50cmllc0xvYWRlZCkge1xuICAgICAgbG9hZEVudHJpZXMoY29sbGVjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ3Vyc29yQWN0aW9ucyA9IChjdXJzb3IsIGFjdGlvbikgPT4ge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbiwgdHJhdmVyc2VDb2xsZWN0aW9uQ3Vyc29yIH0gPSB0aGlzLnByb3BzO1xuICAgIHRyYXZlcnNlQ29sbGVjdGlvbkN1cnNvcihjb2xsZWN0aW9uLCBhY3Rpb24pO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb24sIGVudHJpZXMsIGdyb3VwcywgaXNGZXRjaGluZywgdmlld1N0eWxlLCBjdXJzb3IsIHBhZ2UsIHQgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCBFbnRyaWVzVG9SZW5kZXIgPSAoeyBlbnRyaWVzIH0pID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFbnRyaWVzXG4gICAgICAgICAgY29sbGVjdGlvbnM9e2NvbGxlY3Rpb259XG4gICAgICAgICAgZW50cmllcz17ZW50cmllc31cbiAgICAgICAgICBpc0ZldGNoaW5nPXtpc0ZldGNoaW5nfVxuICAgICAgICAgIGNvbGxlY3Rpb25OYW1lPXtjb2xsZWN0aW9uLmdldCgnbGFiZWwnKX1cbiAgICAgICAgICB2aWV3U3R5bGU9e3ZpZXdTdHlsZX1cbiAgICAgICAgICBjdXJzb3I9e2N1cnNvcn1cbiAgICAgICAgICBoYW5kbGVDdXJzb3JBY3Rpb25zPXtwYXJ0aWFsKHRoaXMuaGFuZGxlQ3Vyc29yQWN0aW9ucywgY3Vyc29yKX1cbiAgICAgICAgICBwYWdlPXtwYWdlfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgaWYgKGdyb3VwcyAmJiBncm91cHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHdpdGhHcm91cHMoZ3JvdXBzLCBlbnRyaWVzLCBFbnRyaWVzVG9SZW5kZXIsIHQpO1xuICAgIH1cblxuICAgIHJldHVybiA8RW50cmllc1RvUmVuZGVyIGVudHJpZXM9e2VudHJpZXN9IC8+O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJOZXN0ZWRFbnRyaWVzKHBhdGgsIGNvbGxlY3Rpb25Gb2xkZXIsIGVudHJpZXMsIHN1YmZvbGRlcnMpIHtcbiAgY29uc3QgZmlsdGVyZWQgPSBlbnRyaWVzLmZpbHRlcihlID0+IHtcbiAgICBsZXQgZW50cnlQYXRoID0gZS5nZXQoJ3BhdGgnKS5zbGljZShjb2xsZWN0aW9uRm9sZGVyLmxlbmd0aCArIDEpO1xuICAgIGlmICghZW50cnlQYXRoLnN0YXJ0c1dpdGgocGF0aCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBmb3Igc3ViZGlyZWN0b3JpZXMsIHRyaW0gb2ZmIHRoZSBwYXJlbnQgZm9sZGVyIGNvcnJlc3BvbmRpbmcgdG9cbiAgICAvLyB0aGlzIG5lc3RlZCBjb2xsZWN0aW9uIGVudHJ5XG4gICAgaWYgKHBhdGgpIHtcbiAgICAgIGVudHJ5UGF0aCA9IGVudHJ5UGF0aC5zbGljZShwYXRoLmxlbmd0aCArIDEpO1xuICAgIH1cblxuICAgIC8vIGlmIHN1YmZvbGRlcnMgbGVnYWN5IG1vZGUgaXMgZW5hYmxlZCwgc2hvdyBvbmx5IGltbWVkaWF0ZSBzdWJmb2xkZXJzXG4gICAgLy8gYWxzbyBzaG93IGluZGV4IGZpbGUgaW4gcm9vdCBmb2xkZXJcbiAgICBpZiAoc3ViZm9sZGVycykge1xuICAgICAgY29uc3QgZGVwdGggPSBlbnRyeVBhdGguc3BsaXQoJy8nKS5sZW5ndGg7XG4gICAgICByZXR1cm4gcGF0aCA/IGRlcHRoID09PSAyIDogZGVwdGggPD0gMjtcbiAgICB9XG5cbiAgICAvLyBvbmx5IHNob3cgaW1tZWRpYXRlIGNoaWxkcmVuXG4gICAgcmV0dXJuICFlbnRyeVBhdGguaW5jbHVkZXMoJy8nKTtcbiAgfSk7XG4gIHJldHVybiBmaWx0ZXJlZDtcbn1cblxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlLCBvd25Qcm9wcykge1xuICBjb25zdCB7IGNvbGxlY3Rpb24sIHZpZXdTdHlsZSwgZmlsdGVyVGVybSB9ID0gb3duUHJvcHM7XG4gIGNvbnN0IHBhZ2UgPSBzdGF0ZS5lbnRyaWVzLmdldEluKFsncGFnZXMnLCBjb2xsZWN0aW9uLmdldCgnbmFtZScpLCAncGFnZSddKTtcblxuICBsZXQgZW50cmllcyA9IHNlbGVjdEVudHJpZXMoc3RhdGUuZW50cmllcywgY29sbGVjdGlvbik7XG4gIGNvbnN0IGdyb3VwcyA9IHNlbGVjdEdyb3VwcyhzdGF0ZS5lbnRyaWVzLCBjb2xsZWN0aW9uKTtcblxuICBpZiAoY29sbGVjdGlvbi5oYXMoJ25lc3RlZCcpKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbkZvbGRlciA9IGNvbGxlY3Rpb24uZ2V0KCdmb2xkZXInKTtcbiAgICBlbnRyaWVzID0gZmlsdGVyTmVzdGVkRW50cmllcyhcbiAgICAgIGZpbHRlclRlcm0gfHwgJycsXG4gICAgICBjb2xsZWN0aW9uRm9sZGVyLFxuICAgICAgZW50cmllcyxcbiAgICAgIGNvbGxlY3Rpb24uZ2V0KCduZXN0ZWQnKS5nZXQoJ3N1YmZvbGRlcnMnKSAhPT0gZmFsc2UsXG4gICAgKTtcbiAgfVxuICBjb25zdCBlbnRyaWVzTG9hZGVkID0gc2VsZWN0RW50cmllc0xvYWRlZChzdGF0ZS5lbnRyaWVzLCBjb2xsZWN0aW9uLmdldCgnbmFtZScpKTtcbiAgY29uc3QgaXNGZXRjaGluZyA9IHNlbGVjdElzRmV0Y2hpbmcoc3RhdGUuZW50cmllcywgY29sbGVjdGlvbi5nZXQoJ25hbWUnKSk7XG5cbiAgY29uc3QgcmF3Q3Vyc29yID0gc2VsZWN0Q29sbGVjdGlvbkVudHJpZXNDdXJzb3Ioc3RhdGUuY3Vyc29ycywgY29sbGVjdGlvbi5nZXQoJ25hbWUnKSk7XG4gIGNvbnN0IGN1cnNvciA9IEN1cnNvci5jcmVhdGUocmF3Q3Vyc29yKS5jbGVhckRhdGEoKTtcblxuICByZXR1cm4geyBjb2xsZWN0aW9uLCBwYWdlLCBlbnRyaWVzLCBncm91cHMsIGVudHJpZXNMb2FkZWQsIGlzRmV0Y2hpbmcsIHZpZXdTdHlsZSwgY3Vyc29yIH07XG59XG5cbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IHtcbiAgbG9hZEVudHJpZXM6IGFjdGlvbkxvYWRFbnRyaWVzLFxuICB0cmF2ZXJzZUNvbGxlY3Rpb25DdXJzb3I6IGFjdGlvblRyYXZlcnNlQ29sbGVjdGlvbkN1cnNvcixcbn07XG5cbmNvbnN0IENvbm5lY3RlZEVudHJpZXNDb2xsZWN0aW9uID0gY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoRW50cmllc0NvbGxlY3Rpb24pO1xuXG5leHBvcnQgZGVmYXVsdCB0cmFuc2xhdGUoKShDb25uZWN0ZWRFbnRyaWVzQ29sbGVjdGlvbik7XG4iXX0= */");
function getGroupEntries(entries, paths) {
  return entries.filter(entry => paths.has(entry.get('path')));
}
function getGroupTitle(group, t) {
  const {
    label,
    value
  } = group;
  if (value === undefined) {
    return t('collection.groups.other');
  }
  if (typeof value === 'boolean') {
    return value ? label : t('collection.groups.negateLabel', {
      label
    });
  }
  return `${label} ${value}`.trim();
}
function withGroups(groups, entries, EntriesToRender, t) {
  return groups.map(group => {
    const title = getGroupTitle(group, t);
    return ___EmotionJSX(GroupContainer, {
      key: group.id,
      id: group.id
    }, ___EmotionJSX(GroupHeading, null, title), ___EmotionJSX(EntriesToRender, {
      entries: getGroupEntries(entries, group.paths)
    }));
  });
}
export class EntriesCollection extends React.Component {
  static propTypes = {
    collection: ImmutablePropTypes.map.isRequired,
    page: PropTypes.number,
    entries: ImmutablePropTypes.list,
    groups: PropTypes.array,
    isFetching: PropTypes.bool.isRequired,
    viewStyle: PropTypes.string,
    cursor: PropTypes.object.isRequired,
    loadEntries: PropTypes.func.isRequired,
    traverseCollectionCursor: PropTypes.func.isRequired,
    entriesLoaded: PropTypes.bool
  };
  componentDidMount() {
    // Manually validate PropTypes - React 19 breaking change
    PropTypes.checkPropTypes(EntriesCollection.propTypes, this.props, 'prop', 'EntriesCollection');
    const {
      collection,
      entriesLoaded,
      loadEntries
    } = this.props;
    if (collection && !entriesLoaded) {
      loadEntries(collection);
    }
  }
  componentDidUpdate(prevProps) {
    const {
      collection,
      entriesLoaded,
      loadEntries
    } = this.props;
    if (collection !== prevProps.collection && !entriesLoaded) {
      loadEntries(collection);
    }
  }
  handleCursorActions = (cursor, action) => {
    const {
      collection,
      traverseCollectionCursor
    } = this.props;
    traverseCollectionCursor(collection, action);
  };
  render() {
    const {
      collection,
      entries,
      groups,
      isFetching,
      viewStyle,
      cursor,
      page,
      t
    } = this.props;
    const EntriesToRender = ({
      entries
    }) => {
      return ___EmotionJSX(Entries, {
        collections: collection,
        entries: entries,
        isFetching: isFetching,
        collectionName: collection.get('label'),
        viewStyle: viewStyle,
        cursor: cursor,
        handleCursorActions: partial(this.handleCursorActions, cursor),
        page: page
      });
    };
    if (groups && groups.length > 0) {
      return withGroups(groups, entries, EntriesToRender, t);
    }
    return ___EmotionJSX(EntriesToRender, {
      entries: entries
    });
  }
}
export function filterNestedEntries(path, collectionFolder, entries, subfolders) {
  const filtered = entries.filter(e => {
    let entryPath = e.get('path').slice(collectionFolder.length + 1);
    if (!entryPath.startsWith(path)) {
      return false;
    }

    // for subdirectories, trim off the parent folder corresponding to
    // this nested collection entry
    if (path) {
      entryPath = entryPath.slice(path.length + 1);
    }

    // if subfolders legacy mode is enabled, show only immediate subfolders
    // also show index file in root folder
    if (subfolders) {
      const depth = entryPath.split('/').length;
      return path ? depth === 2 : depth <= 2;
    }

    // only show immediate children
    return !entryPath.includes('/');
  });
  return filtered;
}
function mapStateToProps(state, ownProps) {
  const {
    collection,
    viewStyle,
    filterTerm
  } = ownProps;
  const page = state.entries.getIn(['pages', collection.get('name'), 'page']);
  let entries = selectEntries(state.entries, collection);
  const groups = selectGroups(state.entries, collection);
  if (collection.has('nested')) {
    const collectionFolder = collection.get('folder');
    entries = filterNestedEntries(filterTerm || '', collectionFolder, entries, collection.get('nested').get('subfolders') !== false);
  }
  const entriesLoaded = selectEntriesLoaded(state.entries, collection.get('name'));
  const isFetching = selectIsFetching(state.entries, collection.get('name'));
  const rawCursor = selectCollectionEntriesCursor(state.cursors, collection.get('name'));
  const cursor = Cursor.create(rawCursor).clearData();
  return {
    collection,
    page,
    entries,
    groups,
    entriesLoaded,
    isFetching,
    viewStyle,
    cursor
  };
}
const mapDispatchToProps = {
  loadEntries: actionLoadEntries,
  traverseCollectionCursor: actionTraverseCollectionCursor
};
const ConnectedEntriesCollection = connect(mapStateToProps, mapDispatchToProps)(EntriesCollection);
export default translate()(ConnectedEntriesCollection);